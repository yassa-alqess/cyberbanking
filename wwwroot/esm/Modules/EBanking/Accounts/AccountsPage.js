import{a as v,b as S,c as a,d as h,e as y}from"../../../_chunks/chunk-R2DVGNLT.js";import{a as C}from"../../../_chunks/chunk-734CUXGP.js";import{a as n,b as U,c as g,d as f,f as x,g as R}from"../../../_chunks/chunk-BX2ZHUFS.js";var k=U((O,E)=>{E.exports=Serenity.Extensions});var B=g(R(),1);var s=g(x(),1);var r=g(x(),1);var c=class extends r.EntityDialog{constructor(){super(...arguments);this.form=new S(this.idPrefix)}getFormKey(){return S.formKey}getRowDefinition(){return a}getService(){return h.baseUrl}getToolbarButtons(){let e=super.getToolbarButtons();return this.entity&&this.entity.AccountId&&e.forEach(o=>{o.visible=!1}),e}updateInterface(){super.updateInterface(),this.isEditMode()&&(r.EditorUtils.setReadOnly(this.form.Balance,!0),r.EditorUtils.setReadOnly(this.form.AccountType,!0),r.EditorUtils.setReadOnly(this.form.OpenDate,!0),r.EditorUtils.setReadOnly(this.form.CustomerId,!0),this.deleteButton.hide(),this.applyChangesButton.hide(),this.saveAndCloseButton.hide())}};n(c,"AccountsDialog"),c=f([r.Decorators.registerClass("cyberbanking.EBanking.AccountsDialog")],c);var t=g(R(),1);var I=g(k(),1);var u=class extends s.EntityGrid{constructor(e){super(e)}getColumnsKey(){return v.columnsKey}getDialogType(){return c}getRowDefinition(){return a}getService(){return h.baseUrl}createToolbarExtensions(){super.createToolbarExtensions(),t.Authorization.hasPermission(y.Security)&&(this.rowSelection=new s.GridRowSelectionMixin(this))}getButtons(){let e=super.getButtons();return t.Authorization.hasPermission(y.Security)&&(e.splice(0,1),e.push({title:"Deactivate Accounts",icon:"fa fa-ban",visible:!0,cssClass:"delete-button",onClick:o=>{let i=this.rowSelection.getSelectedKeys();if(i.length>0){var d=new l;d.done=()=>this.rowSelection.resetCheckedAndRefresh(),d.execute(i)}else(0,t.notifyError)("Please Select Rows to submit")}})),e}getColumns(){let e=super.getColumns(),o=(0,t.first)(e,i=>i.field==a.Fields.CustomerUsername);return t.Authorization.hasPermission(y.Security)&&(e.splice(0,0,s.GridRowSelectionMixin.createSelectColumn(()=>this.rowSelection)),o.visible=!0),e}usePager(){return!0}getQuickFilters(){var i,d,w;let e=super.getQuickFilters();t.Authorization.hasPermission(y.Security)||e.splice((0,t.indexOf)(e,m=>m.field==a.Fields.CustomerUsername),1);let o=(d=(0,t.tryFirst)((i=C.getLookup())==null?void 0:i.items,m=>m.Username==="admin"))==null?void 0:d.UserId.toString();return o&&((w=C.getLookup())==null||w.items.splice((0,t.indexOf)(C.getLookup().items,m=>m.UserId.toString()===o),1)),e}};n(u,"AccountsGrid"),u=f([s.Decorators.registerClass("cyberbanking.EBanking.AccountsGrid")],u);var l=class extends I.BulkServiceAction{getParallelRequests(){return 10}getBatchSize(){return 5}sccss(){alert("sccss");debugger}executeForBatch(p){h.DeactivateList({AccountIds:p.map(e=>(0,t.parseInteger)(e))},e=>{this.set_successCount(this.get_successCount()+p.length)},{blockUI:!1,onError:e=>this.set_errorCount(this.get_errorCount()+p.length),onCleanup:()=>this.serviceCallCleanup()})}};n(l,"DeleteBulkAction"),l=f([s.Decorators.registerClass("cyberbanking.EBanking.DeleteBulkAction")],l);function P(){(0,B.initFullHeightGridPage)(new u($("#GridDiv")).element)}n(P,"pageInit");export{P as default};
//# sourceMappingURL=AccountsPage.js.map
